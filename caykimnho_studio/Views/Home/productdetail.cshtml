@model caykimnho_studio.Models.Products
@using caykimnho_studio.Models

@{
    var relateProduct = Session["relate-product"] as IEnumerable<Products>;
    var categories = Session["lst-category"] as IEnumerable<Categories>;
    ViewBag.Title = "productdetail";
    Layout = "~/Views/Shared/_Layout.cshtml";
    List<string> images = Model.Images.Split('#').ToList();
}

<section class="product_details mb-135">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-6">
                <div class="product_zoom_gallery">
                    <div class="zoom_gallery_inner d-flex">
                        <div class="zoom_tab_img">
                            @foreach (var image in images)
                            {
                                <a class="zoom_tabimg_list" href="javascript:void(0)"><img src="@image" alt="tab-thumb"></a>
                            }
                        </div>
                        <div class="product_zoom_main_img">
                            @foreach (var image in images)
                            {
                                <div class="product_zoom_thumb">
                                    <img data-image="image" src="@image" alt="">
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-md-6">
                <div class="product_d_right">
                    <form action="#">
                        <h1>@Model.Name</h1>
                        <div class="product_ratting_review d-flex align-items-center">
                            <div class=" product_ratting">
                                <ul class="d-flex">
                                    <li><a href="#"><i class="ion-ios-star"></i></a></li>
                                    <li><a href="#"><i class="ion-ios-star"></i></a></li>
                                    <li><a href="#"><i class="ion-ios-star"></i></a></li>
                                    <li><a href="#"><i class="ion-ios-star"></i></a></li>
                                    <li><a href="#"><i class="ion-ios-star"></i></a></li>
                                </ul>
                            </div>
                            <div class="product_review">
                                <ul class="d-flex">
                                    <li>4 đánh giá</li>
                                    <li>Viết đánh giá của bạn</li>
                                </ul>
                            </div>
                        </div>
                        <div class="price_box">
                            @{
                                var sale = Model.DetailProducts.OrderByDescending(o => o.Sale).First().Sale;
                                var prices = Model.DetailProducts.First().Price;
                                if (sale != 0)
                                {
                                    <span class="current_price">@((prices - (prices * sale)).ToString("0,0"))đ </span>
                                    <span class="old_price"> @prices.ToString("0,0")đ</span>
                                }
                                else
                                {
                                    <span class="current_price">@prices.ToString("0,0")đ</span>
                                }
                            }

                        </div>
                        <div class="product_availalbe">
                            <ul class="d-flex">
                                <li><i class="icon-layers icons"></i> Kho: <span>@Model.DetailProducts.Sum(s => s.Quantity)</span></li>
                                <li>Hàng: <span class="stock">May 2 - 15 ngày</span></li>
                            </ul>
                        </div>
                        <div class="product_variant">
                            <div class="filter__list widget_color d-flex align-items-center">
                                <h3>Màu sắc</h3>
                                <ul>
                                    @foreach (var item in Model.DetailProducts.ToList())
                                    {
                                        <li>
                                            <label class="checkmark color3" for="checkmau-@item.Colors.ID">@item.Colors.Name</label>
                                            <input name="checkmau-@item.Colors.ID" id="checkmau-@item.Colors.ID" type="checkbox">
                                        </li>
                                    }
                                </ul>
                            </div>
                            <div class="filter__list widget_size d-flex align-items-center">
                                <h3>Kích cỡ</h3>
                                <ul>
                                    @foreach (var item in Model.DetailProducts.ToList())
                                    {
                                        <li>
                                            <a href="javascript:void(0)">@item.Size.Name</a>
                                        </li>
                                    }
                                </ul>
                            </div>

                            <div class="variant_quantity_btn d-flex">
                                <div class="pro-qty border">
                                    <input min="1" max="100" type="tex" value="1">
                                </div>
                                <button class="button btn btn-primary" type="submit"><i class="ion-android-add"></i> Thêm Vào Giỏ hàng</button>
                                <a data-tippy="Thêm vào yêu thích" class="wishlist"><i class="ion-ios-heart"></i></a>
                            </div>
                        </div>
                        <div class="product_sku">
                            <p><span>SKU: </span> #PRODUCT@(Model.ID.ToString("D8"))</p>
                        </div>
                        <div class="product_tags d-flex">
                            <span>tags: </span>
                            <ul class="d-flex">
                                <li><a href="#">@Model.Categories.Name</a></li>
                            </ul>
                        </div>
                        <div class="priduct_social d-flex">
                            <span>SHARE: </span>
                            <ul>
                                <li><a href="#"><i class="ion-social-twitter"></i></a></li>
                                <li><a href="#"><i class="ion-social-facebook"></i></a></li>
                                <li><a href="#"><i class="ion-social-googleplus-outline"></i></a></li>
                                <li><a href="#"><i class="ion-social-pinterest"></i></a></li>
                                <li><a href="#"><i class="ion-social-instagram-outline"></i></a></li>
                            </ul>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
<!--product details end-->

<div class="product_d_info mb-118">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="product_d_inner">
                    <div class="product_info_button border-bottom">
                        <ul class="nav" role="tablist">
                            <li>
                                <a class="active" data-toggle="tab" href="#info" role="tab" aria-controls="info" aria-selected="false">Chi tiết</a>
                            </li>
                            <li>
                                <a data-toggle="tab" href="#reviews" role="tab" aria-controls="reviews" aria-selected="false">Đánh giá</a>
                            </li>
                            <li>
                                <a data-toggle="tab" href="#video" role="tab" aria-controls="video" aria-selected="false">Video</a>
                            </li>

                        </ul>
                    </div>
                    <div class="tab-content">
                        <div class="tab-pane fade show active" id="info" role="tabpanel">
                            <div class="product_info_content">
                                <p>@Model.Description</p>
                                <ul>
                                    <li>Màu: @Model.DetailProducts.ToList().GroupBy(g => g.Colors.ID).Count()</li>
                                    <li>Số lượng: @Model.DetailProducts.Sum(s => s.Quantity)</li>
                                    <li>Size: @Model.DetailProducts.ToList().GroupBy(g => g.Size.ID).Count()</li>
                                </ul>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="reviews" role="tabpanel">
                            <div class="reviews_wrapper">
                                <h2>1 review for Donec eu furniture</h2>
                                <div class="reviews_comment_box">
                                    <div class="comment_thmb">
                                        <img src="assets/img/blog/comment2.jpg" alt="">
                                    </div>
                                    <div class="comment_text">
                                        <div class="reviews_meta">
                                            <div class="star_rating">
                                                <ul class="d-flex">
                                                    <li><a href="#"><i class="ion-ios-star"></i></a></li>
                                                    <li><a href="#"><i class="ion-ios-star"></i></a></li>
                                                    <li><a href="#"><i class="ion-ios-star"></i></a></li>
                                                    <li><a href="#"><i class="ion-ios-star"></i></a></li>
                                                    <li><a href="#"><i class="ion-ios-star"></i></a></li>
                                                </ul>
                                            </div>
                                            <p style="font-size:12px"><strong>tuandv3010 </strong></p>
                                            <p style="font-size:12px; margin-top: -22px">12 tháng 9, 2023</p>
                                            <span>Áo xinh quá đẹp, giao hàng nhanh đặc biệt là quá thơmmmmm</span>
                                        </div>
                                    </div>

                                </div>
                                <div class="comment_title">
                                    <h2>Thêm đánh giá </h2>
                                    <p>Email của bạn sẽ được bảo mật 100%, nhập đầy đủ các trường thông tin</p>
                                </div>
                                <div class="product_ratting mb-10">
                                    <h3>Đánh giá sao</h3>
                                    <ul class="d-flex">
                                        <li><a href="#"><i class="icon-star"></i></a></li>
                                        <li><a href="#"><i class="icon-star"></i></a></li>
                                        <li><a href="#"><i class="icon-star"></i></a></li>
                                        <li><a href="#"><i class="icon-star"></i></a></li>
                                        <li><a href="#"><i class="icon-star"></i></a></li>
                                    </ul>
                                </div>
                                <div class="product_review_form">
                                    <form action="#">
                                        <div class="row">
                                            <div class="col-12">
                                                <label for="review_comment">Viết đánh giá chi tiết </label>
                                                <textarea name="comment" id="review_comment" placeholder="Nhập đánh giá của bạn tối đa 200 từ"></textarea>
                                            </div>
                                            <div class="col-lg-6 col-md-6">
                                                <label for="author">Name</label>
                                                <input id="author" type="text">

                                            </div>
                                            <div class="col-lg-6 col-md-6">
                                                <label for="email">Email </label>
                                                <input id="email" type="text">
                                            </div>
                                        </div>
                                        <button type="submit">GỬI ĐÁNH GIÁ</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="video" role="tabpanel">
                            <div class="product_tab_vidio text-center">
                                <iframe style="border-radius:15px" width="729" height="410" src="@Model.Videos" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--product info end-->
<!--product area start-->
<section class="product_area related_products mb-118">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="section_title mb-50">
                    <h2>Sản Phẩm Tương Tự</h2>
                </div>
            </div>
        </div>
        <div class="product_container row">
            <div class=" product_slick slick_slider_activation" data-slick='{
                    "slidesToShow": 4,
                    "slidesToScroll": 1,
                    "arrows": true,
                    "dots": false,
                    "autoplay": true,
                    "speed": 500,
                    "infinite": true,
                    "responsive":[
                      {"breakpoint":992, "settings": { "slidesToShow": 3 } },
                      {"breakpoint":768, "settings": { "slidesToShow": 2 } },
                      {"breakpoint":300, "settings": { "slidesToShow": 1 } }
                     ]
                }'>
                @foreach (var item in relateProduct.ToList())
                {
                    <div class="col-lg-3">
                        <article class="single_product">
                            <figure>
                                <div class="product_thumb">
                                    <a>
                                        <img class="primary_img" src="@item.Images.Split('#')[0].ToString()"
                                             alt="consectetur">
                                    </a>
                                    <div class="product_action">
                                        <ul>
                                            <li class="quick_view">
                                                <a data-toggle="modal" data-target="#modal_box"
                                                   data-tippy="Xem nhanh chi tiết" href="#" data-tippy-inertia="true"
                                                   data-tippy-delay="50" data-tippy-arrow="true"
                                                   data-tippy-placement="left">
                                                    <i class="icon-size-fullscreen icons"></i>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                    @{
                                        var sales = item.DetailProducts.OrderByDescending(o => o.Sale).First().Sale;
                                        if (sales != 0)
                                        {
                                            <div class="product_label">
                                                <span>-@((sales * 100).ToString("0,0"))%</span>
                                            </div>
                                        }
                                    }
                                </div>
                                <figcaption class="product_content text-center">
                                    <div class="product_ratting">
                                        <ul class="d-flex justify-content-center">
                                            <li><a href="#"><i class="ion-android-star"></i></a></li>
                                            <li><a href="#"><i class="ion-android-star"></i></a></li>
                                            <li><a href="#"><i class="ion-android-star"></i></a></li>
                                            <li><a href="#"><i class="ion-android-star"></i></a></li>
                                            <li><a href="#"><i class="ion-android-star"></i></a></li>
                                            <li><span>(4)</span></li>
                                        </ul>
                                    </div>
                                    <h4 class="product_name">
                                        <a href="@Url.Action("productdetail", "home", new {id = item.ID})">@item.Name</a>
                                    </h4>
                                    <div class="price_box">
                                        @{
                                            var pricess = item.DetailProducts.First().Price;
                                            if (sales != 0)
                                            {
                                                <span class="current_price">@((pricess - (pricess * sales)).ToString("0,0"))đ </span>
                                                <span class="old_price"> @pricess.ToString("0,0")đ</span>
                                            }
                                            else
                                            {
                                                <span class="current_price">@pricess.ToString("0,0")đ</span>
                                            }
                                        }
                                    </div>
                                    <div class="add_to_cart">
                                        <a class="btn btn-primary" href="#"
                                           data-tippy-inertia="true" data-tippy-delay="50" data-tippy-arrow="true"
                                           data-tippy-placement="top">Thêm Vào Giỏ</a>
                                    </div>
                                </figcaption>
                            </figure>
                        </article>

                    </div>
                }
            </div>
        </div>
    </div>
</section>
<!--product area end-->